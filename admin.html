<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EDS Admin</title>
<style>
body{font-family:Arial, sans-serif;background:#f4f4f4;margin:0;padding:0;}
header{background:#fff;padding:20px;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
table{width:90%;margin:20px auto;border-collapse:collapse;}
th,td{padding:10px;border:1px solid #ccc;text-align:left;}
input{padding:5px;margin:5px;}
button{padding:5px 10px;margin:5px;background:#007bff;color:#fff;border:none;border-radius:3px;cursor:pointer;}
button:hover{background:#0056b3;}
</style>
</head>
<body>
<header><h2>Admin Panel - EDS</h2></header>

<div style="text-align:center;">
<input type="text" id="search" placeholder="Rechercher par nom/prénom/numéro">
<button onclick="searchUser()">Rechercher</button>
<button onclick="deleteAll()">Supprimer Tous</button>
</div>

<table id="userTable">
<thead>
<tr><th>#</th><th>Nom</th><th>Prénom</th><th>Numéro</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>

<script>
let users = JSON.parse(localStorage.getItem('users') || '[]');
const tableBody=document.querySelector('#userTable tbody');

function renderUsers(list){
    tableBody.innerHTML='';
    list.forEach((u,i)=>{
        let row=document.createElement('tr');
        row.innerHTML=`<td>${i+1}</td><td>${u.nom}</td><td>${u.prenom}</td><td>${u.numero}</td>
        <td><button onclick="deleteUser(${i})">Supprimer</button></td>`;
        tableBody.appendChild(row);
    });
}

function deleteUser(index){
    let pass=prompt("Mot de passe admin pour supprimer :");
    if(pass==='04004749'){
        users.splice(index,1);
        localStorage.setItem('users',JSON.stringify(users));
        renderUsers(users);
    } else {alert("Mot de passe incorrect !");}
}

function deleteAll(){
    let pass=prompt("Mot de passe admin pour supprimer tous les utilisateurs :");
    if(pass==='04004749'){
        users=[];
        localStorage.setItem('users',JSON.stringify(users));
        renderUsers(users);
    } else {alert("Mot de passe incorrect !");}
}

function searchUser(){
    let term=document.getElementById('search').value.toLowerCase();
    let filtered=users.filter(u=>u.nom.toLowerCase().includes(term) || u.prenom.toLowerCase().includes(term) || u.numero.includes(term));
    renderUsers(filtered);
}

renderUsers(users);
</script>
</body>
</html>
